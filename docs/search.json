[{"path":"https://cbmc-gcmp.github.io/dafishr/articles/dafisr.html","id":"downloading-raw-data-on-your-computer","dir":"Articles","previous_headings":"","what":"Downloading raw data on your computer","title":"Where to start","text":"VMS data comes organized year. function vms_download() automatically downloads store working directory VMS-data folder. Within folder raw data organized monthly folders (names Spanish) contain several .csv files usually store byweekly data intervals. file different rows different column names. highly recommend use vms_clean() function. latter corrects several inconsistencies within raw data. suggestion spot errors pleased create issue. function downloads data year 2019.","code":"library(dafishr)  vms_download(2019)"},{"path":"https://cbmc-gcmp.github.io/dafishr/articles/dafisr.html","id":"using-the-cleaning-functions","dir":"Articles","previous_headings":"","what":"Using the cleaning functions","title":"Where to start","text":"first vms_clean() function works VMS data.frame. can either load downloaded data use sample_dataset can call clean like : vms_clean() function returns message number rows cleaned contained NULL values coordinates.","code":"library(dafishr) data(\"sample_dataset\") vms_cleaned <- vms_clean(sample_dataset)"},{"path":"https://cbmc-gcmp.github.io/dafishr/articles/dafisr.html","id":"spatial-wrangling","dir":"Articles","previous_headings":"","what":"Spatial wrangling","title":"Where to start","text":"dataset wrangled, preprocessing steps follow. First, points fall inland eliminated. VMS data vessels, thus points falling inland errors data registration. upload mx_inland shapefile helps eliminating points within cerain distance coastline.","code":"data(\"mx_inland\") # Shapefile of inland Mexico area vms_cleaned_land <- clean_land_points(vms_cleaned, mx_inland)"},{"path":"https://cbmc-gcmp.github.io/dafishr/articles/dafisr.html","id":"associating-port-data","dir":"Articles","previous_headings":"Spatial wrangling","what":"Associating port data","title":"Where to start","text":"land points eliminated, can use join_ports_locations() function label points vessel inside port marina. achieve using mx_ports shapefile used create buffer around port marina location. VMS point falls within buffers labelled at_port at_sea new column automatically called location. Now can check results map:","code":"data(\"mx_ports\")  # If you are just testing, it is a good idea to subsample... it takes a while on the full data!  vms_subset <- dplyr::sample_n(vms_cleaned, 1000) with_ports <- join_ports_locations(vms_subset) with_ports_sf <- sf::st_as_sf(with_ports,                          coords = c(\"longitude\", \"latitude\"),                          crs = 4326)  data(\"mx_shape\")  library(ggplot2) ggplot(mx_shape) +             geom_sf(col = \"gray90\") +             geom_sf(data = with_ports_sf, aes(col = location)) +             facet_wrap( ~ location) +             theme_bw()"},{"path":"https://cbmc-gcmp.github.io/dafishr/articles/Supplementary.html","id":"context","dir":"Articles","previous_headings":"","what":"Context","title":"Supplementary Information of:","text":"Implementing fully protected Large Marine Protected Areas (LMPAs) important preserve food, curb overfishing, halt biodiversity loss. International commitments form area-based targets given much popularity LMPAs also drew criticism fishery perspective. study, analyzed fishing activity Mexican industrial vessels found current fishing activity within LMPA minimal. industrial fishing footprint affected establishing LMPA, successfully reduced fishing pressure within polygon. decrease catches fishing effort displacement observed MPA implementation. study proves usefulness open VMS data MPA assessment, monitoring, fishery management. Fully protecting existing remote areas first step towards fulfilling ambitious 30x30 conservation target, require establishment LMPAs strategically placed within conservation network can efficiently curb human impacts.","code":""},{"path":"https://cbmc-gcmp.github.io/dafishr/articles/Supplementary.html","id":"raw-data-download","dir":"Articles","previous_headings":"","what":"Raw data download","title":"Supplementary Information of:","text":"first step downloading raw VMS data using vms_download() function. connects Datos Abiertos webpages download original data. Data comes several .csv files within sub-folder order month. Often .csv data split -weekly. can download years available running: Speed download depends internet connection might take . data stored within working directory VMS-data folder default.","code":"library(dafishr)  year <- c(2008:2021) lapply(year, vms_download)"},{"path":"https://cbmc-gcmp.github.io/dafishr/articles/Supplementary.html","id":"preprocessing-vms-data","dir":"Articles","previous_headings":"","what":"Preprocessing VMS data","title":"Supplementary Information of:","text":"Raw VMS data need preprocessed order tidy datasets. processing consist several steps: Data wrangling: standardizing column names, formatting dates, filtering mistake within raw data. Sometimes example data misplaced can NULL entries. need eliminated. Spatial corrections: eliminates coordinates fall inland ping errors data entry errors. Spatial joining: spatially joins VMS points port areas MPA polygons. Since raw VMS data folder contains several .csv files quite big joined together, processing quickly saturate RAM memory personal computer. Therefore, piece meal strategy adopted maintaining file separated working independently preprocessing phase. also allows include parallel processing approach looping raw file creating outputs separately inside standard preprocessed folder. Outputs files .fst format awesome handle large datasets (see fst package documentation information).","code":""},{"path":[]},{"path":"https://cbmc-gcmp.github.io/dafishr/articles/Supplementary.html","id":"note-on-setting-cpu-cores","dir":"Articles","previous_headings":"Preprocessing VMS data > ‚ùóDISCLAIMER ‚ùó","what":"Note on setting CPU cores","title":"Supplementary Information of:","text":"speed process, use parallel processing. don‚Äôt know , might want stop contact us continuing. make use future.lapply package allow things run parallel processing using cores CPU. can set many CPU want use plan() function. can go full throttle , strongly advise don‚Äôt, data saturate RAM. personally tested functions XPS dell Intel(R) Core(TM) i9/9980HK CPU 2.40 GHz 8 cores 32 GB RAM, go full throttle fails RAM. Unless running server, pretty sure fail PC . question, comments, advice welcome please, contact ! short, make sense use 2 4 cores, take time won‚Äôt fail burn RAM. take responsibility whatsoever damages personal belongings might come running recklessly, please don‚Äôt try home don‚Äôt know . feel safer using parallel processing can ! provide example right one. time put test! First load future.lapply package parallel processing, parallelize lapply like functions R. ‚Äôll create list raw files within downloaded folder apply function preprocessing_vms(). run , go grab coffee ‚òï, maybe even two‚òï‚òï, actually don‚Äôt, maybe take quick nap üõå‚Ä¶ take run full data. just want test , can use function one year specifying folder containing one year worth data (less, want). chose run parallel can following. case, definitely go take nap, take much time. can set sound alert using beepr package wake ‚Äôs done want üòÉ.","code":"library(future.apply) # this library is need for parallel processing library(fst) # this allows to load fst type of files  # Creating a list of file names from downloaded data (change the path if needed) file_names <- list.files(                         \"VMS-data/\",                         pattern = \".csv\",                         full.names = T,                         recursive = T             )  # this plans a parallel session, set workers carefully according to your CPU capabilities # here I conservatively set it to 2 cores. plan(multisession, workers = 2)  # This runs the function in parallel and times it system.time(future_lapply(file_names, preprocessing_vms)) library(fst) # this allows to load fst type of files  # Creating a list of file names from downloaded data (change the path if needed) file_names <- list.files(                         \"VMS-data/raw/\",                         pattern = \".csv\",                         full.names = T,                         recursive = T             )   system.time(lapply(file_names, preprocessing_vms))"},{"path":"https://cbmc-gcmp.github.io/dafishr/articles/Supplementary.html","id":"vms-modeling-with-gaussian-mixed-models","dir":"Articles","previous_headings":"","what":"VMS modeling with Gaussian Mixed Models","title":"Supplementary Information of:","text":"section model preprocessed VMS data Gaussian Mixed Models.","code":""},{"path":"https://cbmc-gcmp.github.io/dafishr/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Fabio Favoretto. Author, maintainer. Eduardo Leon Solorzano. Contributor.","code":""},{"path":"https://cbmc-gcmp.github.io/dafishr/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Favoretto F (2022). dafishr: Download, Wrangle, Analyse VMS data. https://github.com/CBMC-GCMP/dafishr, https://cbmc-gcmp.github.io/dafishr.","code":"@Manual{,   title = {dafishr: Download, Wrangle, and Analyse VMS data},   author = {Fabio Favoretto},   year = {2022},   note = {https://github.com/CBMC-GCMP/dafishr, https://cbmc-gcmp.github.io/dafishr}, }"},{"path":"https://cbmc-gcmp.github.io/dafishr/index.html","id":"dafishr-","dir":"","previous_headings":"","what":"Download, Wrangle, and Analyse VMS data","title":"Download, Wrangle, and Analyse VMS data","text":"goal dafishr provide easy way download VMS analyse data Sismep Mexican Fishery Commission available Datos Abiertos initiative. Within package can find tools allows download VMS data, wrangle clean raw data, analyse tracks. VMS stands Vessel Monitoring System, adopted industrial fishing vessels monitor fishing activity. data important understand fishing activity within country, dynamics time space, monitor activity within Marine Protected Areas (MPAs). Along data VMS also provide layers used clean map information. currently working scientific manuscript related work currently review. can follow instruction using sample dataset comes along package, can use function data can download using vms_download() function. See ?vms_data details usage.","code":""},{"path":"https://cbmc-gcmp.github.io/dafishr/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Download, Wrangle, and Analyse VMS data","text":"can install dafishr : haven‚Äôt devtools package previously installed just delete comment # code run lines.","code":"# install.packages(\"devtools\") devtools::install_github(\"CBMC-GCMP/dafishr\")"},{"path":"https://cbmc-gcmp.github.io/dafishr/index.html","id":"where-to-start","dir":"","previous_headings":"","what":"Where to start","title":"Download, Wrangle, and Analyse VMS data","text":"can start using dafishr suit functions using sample_dataset provided package, can download raw-data files using vms_download function. details explained documentation vignette package. can see suit data functions available within package .","code":""},{"path":"https://cbmc-gcmp.github.io/dafishr/index.html","id":"dependencies","dir":"","previous_headings":"","what":"Dependencies","title":"Download, Wrangle, and Analyse VMS data","text":"package follows tidyverse programming style depends several package family downloaded automatically installed. functions can applied general object, specifically built format raw data VMS form CONAPESCA (Mexican Fishery Commission). Therefore, package focused mostly format help user analyse report data.","code":""},{"path":"https://cbmc-gcmp.github.io/dafishr/index.html","id":"how-to-contribute","dir":"","previous_headings":"","what":"How to contribute","title":"Download, Wrangle, and Analyse VMS data","text":"workflow provided work progress probably errors haven‚Äôt spotted considered now. feel can contribute effort feel free creating pull request. undergrad help develop scientific projects using data welcome contact us. Please, find contact information main author , via twitter.","code":""},{"path":"https://cbmc-gcmp.github.io/dafishr/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2022 dafishr authors Permission hereby granted, free charge, person obtaining copy software associated documentation files (‚ÄúSoftware‚Äù), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED ‚Äú‚Äù, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":"https://cbmc-gcmp.github.io/dafishr/reference/all_mpas.html","id":null,"dir":"Reference","previous_headings":"","what":"Marine Protected Areas (MPAs) of Mexico ‚Äî all_mpas","title":"Marine Protected Areas (MPAs) of Mexico ‚Äî all_mpas","text":"sf object containing shapefiles MPA polygons Mexico","code":""},{"path":"https://cbmc-gcmp.github.io/dafishr/reference/all_mpas.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Marine Protected Areas (MPAs) of Mexico ‚Äî all_mpas","text":"","code":"all_mpas"},{"path":"https://cbmc-gcmp.github.io/dafishr/reference/all_mpas.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Marine Protected Areas (MPAs) of Mexico ‚Äî all_mpas","text":"simple feature collection 24 features 5 fields NOMBRE Name MPA Spanish CAT_DECRET Decree category, define type MPA ESTADOS State jurisdiction MPA MUNICIPIOS Municipality jurisdiction MPA REGION General regional localization MPA (Spanish) geometry column containing geometry details","code":""},{"path":"https://cbmc-gcmp.github.io/dafishr/reference/all_mpas.html","id":"source","dir":"Reference","previous_headings":"","what":"Source","title":"Marine Protected Areas (MPAs) of Mexico ‚Äî all_mpas","text":"http://sig.conanp.gob.mx/website/pagsig/info_shape.htm","code":""},{"path":"https://cbmc-gcmp.github.io/dafishr/reference/clean_land_points.html","id":null,"dir":"Reference","previous_headings":"","what":"Clean points falling inland ‚Äî clean_land_points","title":"Clean points falling inland ‚Äî clean_land_points","text":"functions eliminates points falling inland using st_difference() function sf package.","code":""},{"path":"https://cbmc-gcmp.github.io/dafishr/reference/clean_land_points.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Clean points falling inland ‚Äî clean_land_points","text":"","code":"clean_land_points(x, mx_inland = mx_inland)"},{"path":"https://cbmc-gcmp.github.io/dafishr/reference/clean_land_points.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Clean points falling inland ‚Äî clean_land_points","text":"x data.frame containing latitude longitude coordinates vessels tracks cleaned land area mx_inland shapefile loaded packages representing inland Mexico area, can uploaded data(\"mx_inland)","code":""},{"path":"https://cbmc-gcmp.github.io/dafishr/reference/clean_land_points.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Clean points falling inland ‚Äî clean_land_points","text":"data.frame object","code":""},{"path":"https://cbmc-gcmp.github.io/dafishr/reference/clean_land_points.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Clean points falling inland ‚Äî clean_land_points","text":"Points falling inland VMS dataset obvious mistakes, thus need eliminated data. function calls stored shapefile mx_inland custom sf object created using coastline buffer avoid eliminating points lack precision within shapefiles. function works dataset containing coordinate points crs = 4326 named latitude longitude. See first example non-VMS dataset. second example showes usage VMS sample data.","code":""},{"path":"https://cbmc-gcmp.github.io/dafishr/reference/clean_land_points.html","id":"warning","dir":"Reference","previous_headings":"","what":"Warning","title":"Clean points falling inland ‚Äî clean_land_points","text":"function takes !! test can use dplyr::sample_n() function shown example.","code":""},{"path":"https://cbmc-gcmp.github.io/dafishr/reference/clean_land_points.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Clean points falling inland ‚Äî clean_land_points","text":"","code":"# with non VMS data x <- data.frame(   longitude = runif(1000, min = -150, max = -80),   latitude = runif(1000, min = 15, max = 35) ) data(\"mx_inland\") x <- clean_land_points(x, mx_inland) #> Spherical geometry (s2) switched off #> although coordinates are longitude/latitude, st_union assumes that they are planar #> although coordinates are longitude/latitude, st_difference assumes that they are planar #> Warning: attribute variables are assumed to be spatially constant throughout all geometries  # using sample_dataset  data(\"sample_dataset\", \"mx_inland\")  vms_cleaned <- vms_clean(sample_dataset) #> [1] 969 #> Cleaned: 969 empty rows from data!  vms_no_land <- clean_land_points(vms_cleaned, mx_inland) #> although coordinates are longitude/latitude, st_union assumes that they are planar #> although coordinates are longitude/latitude, st_difference assumes that they are planar #> Warning: attribute variables are assumed to be spatially constant throughout all geometries  # You can check the results by plotting the data  vms_cleaned_sf <- sf::st_as_sf(vms_cleaned, coords = c(\"longitude\", \"latitude\"), crs = 4326)  vms_no_land_sf <- sf::st_as_sf(vms_no_land, coords = c(\"longitude\", \"latitude\"), crs = 4326)  library(ggplot2) ggplot(vms_cleaned_sf) +   geom_sf(col = \"red\") +   geom_sf(data = vms_no_land_sf, col = \"black\")   # in the provided example only few inland points are eliminated. # There are more evident one within historical data."},{"path":"https://cbmc-gcmp.github.io/dafishr/reference/join_mpa_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Detect fishing vessel presence within MPA polygons in Mexico ‚Äî join_mpa_data","title":"Detect fishing vessel presence within MPA polygons in Mexico ‚Äî join_mpa_data","text":"function spatially joins VMS points MPA polygons Mexico.","code":""},{"path":"https://cbmc-gcmp.github.io/dafishr/reference/join_mpa_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Detect fishing vessel presence within MPA polygons in Mexico ‚Äî join_mpa_data","text":"","code":"join_mpa_data(x, all_mpas = all_mpas)"},{"path":"https://cbmc-gcmp.github.io/dafishr/reference/join_mpa_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Detect fishing vessel presence within MPA polygons in Mexico ‚Äî join_mpa_data","text":"x data.frame VMS data must contain columns longitude latitude all_mpas shape file contains MPA polygons Mexico can upload using data(\"all_mpas\")","code":""},{"path":"https://cbmc-gcmp.github.io/dafishr/reference/join_mpa_data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Detect fishing vessel presence within MPA polygons in Mexico ‚Äî join_mpa_data","text":"data.frame","code":""},{"path":"https://cbmc-gcmp.github.io/dafishr/reference/join_mpa_data.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Detect fishing vessel presence within MPA polygons in Mexico ‚Äî join_mpa_data","text":"adds three columns zone, mpa_decree, state, municipality, region, data MPAs polygon. zone contains name MPA (Spanish) vessel outside MPA polygon dubbed open area, mpa_decree contains type MPA (National Park, etc.), state contains Mexican state juridisction MPA, municipality contains Mexican municipality jurisdiction MPA, region contains overall location MPA (Spanish)","code":""},{"path":"https://cbmc-gcmp.github.io/dafishr/reference/join_mpa_data.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Detect fishing vessel presence within MPA polygons in Mexico ‚Äî join_mpa_data","text":"","code":"# Use sample_dataset data(\"sample_dataset\") data(\"all_mpas\") vms_cleaned <- vms_clean(sample_dataset) #> [1] 969 #> Cleaned: 969 empty rows from data!  vms_mpas <- join_mpa_data(vms_cleaned, all_mpas) #> although coordinates are longitude/latitude, st_intersects assumes that they are planar #> although coordinates are longitude/latitude, st_intersects assumes that they are planar   # Plotting data # Points NOT inside MPA are removed to reduce data size vms_mpas_sub <- vms_mpas %>%   dplyr::filter(zone != \"open area\")  vms_mpas_sf <- sf::st_as_sf(vms_mpas_sub, coords = c(\"longitude\", \"latitude\"), crs = 4326)  # Loading Mexico shapefile data(\"mx_shape\")  # Map library(ggplot2) ggplot(mx_shape, col = \"gray90\") +   geom_sf(data = all_mpas, fill = \"gray60\") +   geom_sf(data = vms_mpas_sf, aes(col = zone)) +   theme_void() +   theme(legend.position = \"\")"},{"path":"https://cbmc-gcmp.github.io/dafishr/reference/join_ports_locations.html","id":null,"dir":"Reference","previous_headings":"","what":"Label points when vessel is at port ‚Äî join_ports_locations","title":"Label points when vessel is at port ‚Äî join_ports_locations","text":"function joins ports locations using data ports buffers. mx_ports data used provided INEGI https://en.www.inegi.org.mx/","code":""},{"path":"https://cbmc-gcmp.github.io/dafishr/reference/join_ports_locations.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Label points when vessel is at port ‚Äî join_ports_locations","text":"","code":"join_ports_locations(x, mx_ports = mx_ports, buffer_size = 0.15)"},{"path":"https://cbmc-gcmp.github.io/dafishr/reference/join_ports_locations.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Label points when vessel is at port ‚Äî join_ports_locations","text":"x data.frame latitude longitude coordinates mx_ports shapefile point data storing coordinates ports marina Mexico, can upload using data(\"mx_ports\") buffer_size number (double) indicating size buffer ports implement","code":""},{"path":"https://cbmc-gcmp.github.io/dafishr/reference/join_ports_locations.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Label points when vessel is at port ‚Äî join_ports_locations","text":"data.frame","code":""},{"path":"https://cbmc-gcmp.github.io/dafishr/reference/join_ports_locations.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Label points when vessel is at port ‚Äî join_ports_locations","text":"function adds location column indicating vessel port sea.","code":""},{"path":"https://cbmc-gcmp.github.io/dafishr/reference/join_ports_locations.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Label points when vessel is at port ‚Äî join_ports_locations","text":"","code":"# With sample data  data(\"sample_dataset\") data(\"mx_ports\") vms_cleaned <- vms_clean(sample_dataset) #> [1] 969 #> Cleaned: 969 empty rows from data!   # It is a good idea to subsample when testing... it takes a while on the full data!  vms_subset <- dplyr::sample_n(vms_cleaned, 1000) with_ports <- join_ports_locations(vms_subset) #> Warning: st_buffer does not correctly buffer longitude/latitude data #> dist is assumed to be in decimal degrees (arc_degrees). #> although coordinates are longitude/latitude, st_union assumes that they are planar #> although coordinates are longitude/latitude, st_difference assumes that they are planar #> Warning: attribute variables are assumed to be spatially constant throughout all geometries with_ports_sf <- sf::st_as_sf(with_ports, coords = c(\"longitude\", \"latitude\"), crs = 4326)  data(\"mx_shape\") library(ggplot2) ggplot(mx_shape) +   geom_sf(col = \"gray90\") +   geom_sf(data = with_ports_sf, aes(col = location)) +   facet_wrap(~location) +   theme_bw()"},{"path":"https://cbmc-gcmp.github.io/dafishr/reference/landings.html","id":null,"dir":"Reference","previous_headings":"","what":"Catch data from the vessels in Mexico ‚Äî landings","title":"Catch data from the vessels in Mexico ‚Äî landings","text":"data.frame object containing catch data per vessel 2015 2020","code":""},{"path":"https://cbmc-gcmp.github.io/dafishr/reference/landings.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Catch data from the vessels in Mexico ‚Äî landings","text":"","code":"landings"},{"path":"https://cbmc-gcmp.github.io/dafishr/reference/landings.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Catch data from the vessels in Mexico ‚Äî landings","text":"data.frame  111,369 rows 7 columns office_name Name office catch reported year year catch taken category vessel category MENORES = artesanal vessels, MAYORES = industrial vessels vessel_name Official name vessel species_name General name species caught live_catch_ton Fresh weight catch tons catch_ton final weight catch tons","code":""},{"path":"https://cbmc-gcmp.github.io/dafishr/reference/landings.html","id":"source","dir":"Reference","previous_headings":"","what":"Source","title":"Catch data from the vessels in Mexico ‚Äî landings","text":"https://datos.gob.mx/busca/organization/conapesca","code":""},{"path":"https://cbmc-gcmp.github.io/dafishr/reference/model_vms.html","id":null,"dir":"Reference","previous_headings":"","what":"Vessel Modelling with Gaussian Mixture Models ‚Äî model_vms","title":"Vessel Modelling with Gaussian Mixture Models ‚Äî model_vms","text":"function uses normalmixEM mixtools package model speed vessels estimates behavior. Specifically, vessel fishing activity cruising","code":""},{"path":"https://cbmc-gcmp.github.io/dafishr/reference/model_vms.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Vessel Modelling with Gaussian Mixture Models ‚Äî model_vms","text":"","code":"model_vms(df)"},{"path":"https://cbmc-gcmp.github.io/dafishr/reference/model_vms.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Vessel Modelling with Gaussian Mixture Models ‚Äî model_vms","text":"df data.frame preprocessed using preprocessing_vms() function package","code":""},{"path":"https://cbmc-gcmp.github.io/dafishr/reference/model_vms.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Vessel Modelling with Gaussian Mixture Models ‚Äî model_vms","text":"data.frame vessel_state column type model implemented","code":""},{"path":"https://cbmc-gcmp.github.io/dafishr/reference/model_vms.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Vessel Modelling with Gaussian Mixture Models ‚Äî model_vms","text":"","code":"if (FALSE) { model_vms(df) }"},{"path":"https://cbmc-gcmp.github.io/dafishr/reference/mpas_buffers.html","id":null,"dir":"Reference","previous_headings":"","what":"Buffer around remote Marine Protected Areas of Mexico ‚Äî mpas_buffers","title":"Buffer around remote Marine Protected Areas of Mexico ‚Äî mpas_buffers","text":"sf object containing shapefiles buffers around remote MPAs Mexico. buffer equals area inside MPA polygon created assess differences fishing activity inside outside remote MPAs.","code":""},{"path":"https://cbmc-gcmp.github.io/dafishr/reference/mpas_buffers.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Buffer around remote Marine Protected Areas of Mexico ‚Äî mpas_buffers","text":"","code":"mpas_buffers"},{"path":"https://cbmc-gcmp.github.io/dafishr/reference/mpas_buffers.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Buffer around remote Marine Protected Areas of Mexico ‚Äî mpas_buffers","text":"simple feature collection 5 features 2 fields Name Name MPAs buffer correspond Description empty geometry column containing geometry details","code":""},{"path":"https://cbmc-gcmp.github.io/dafishr/reference/mpas_buffers.html","id":"source","dir":"Reference","previous_headings":"","what":"Source","title":"Buffer around remote Marine Protected Areas of Mexico ‚Äî mpas_buffers","text":"project","code":""},{"path":"https://cbmc-gcmp.github.io/dafishr/reference/mx_coastline.html","id":null,"dir":"Reference","previous_headings":"","what":"Mexican coastline ‚Äî mx_coastline","title":"Mexican coastline ‚Äî mx_coastline","text":"sf object containing Mexican coastline shapefile","code":""},{"path":"https://cbmc-gcmp.github.io/dafishr/reference/mx_coastline.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Mexican coastline ‚Äî mx_coastline","text":"","code":"mx_coastline"},{"path":"https://cbmc-gcmp.github.io/dafishr/reference/mx_coastline.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Mexican coastline ‚Äî mx_coastline","text":"simple feature collection 177 features 3 fields featurecla Name object scalerank resolution rank min_zoom zoom precision geometry column containing geometry details","code":""},{"path":"https://cbmc-gcmp.github.io/dafishr/reference/mx_coastline.html","id":"source","dir":"Reference","previous_headings":"","what":"Source","title":"Mexican coastline ‚Äî mx_coastline","text":"https://cran.r-project.org/web/packages/rnaturalearth/README.html","code":""},{"path":"https://cbmc-gcmp.github.io/dafishr/reference/mx_coastline_buffer.html","id":null,"dir":"Reference","previous_headings":"","what":"Buffer around the Mexican coastline ‚Äî mx_coastline_buffer","title":"Buffer around the Mexican coastline ‚Äî mx_coastline_buffer","text":"sf object containing buffer around Mexican coastline used create inland shapefile available package.","code":""},{"path":"https://cbmc-gcmp.github.io/dafishr/reference/mx_coastline_buffer.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Buffer around the Mexican coastline ‚Äî mx_coastline_buffer","text":"","code":"mx_coastline_buffer"},{"path":"https://cbmc-gcmp.github.io/dafishr/reference/mx_coastline_buffer.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Buffer around the Mexican coastline ‚Äî mx_coastline_buffer","text":"simple feature collection 1 feature 3 fields featurecla Name object scalerank resolution rank min_zoom zoom precision geometry column containing geometry details","code":""},{"path":"https://cbmc-gcmp.github.io/dafishr/reference/mx_coastline_buffer.html","id":"source","dir":"Reference","previous_headings":"","what":"Source","title":"Buffer around the Mexican coastline ‚Äî mx_coastline_buffer","text":"https://cran.r-project.org/web/packages/rnaturalearth/README.html","code":""},{"path":"https://cbmc-gcmp.github.io/dafishr/reference/mx_eez.html","id":null,"dir":"Reference","previous_headings":"","what":"Mexico shape ‚Äî mx_eez","title":"Mexico shape ‚Äî mx_eez","text":"sf object containing shapefile representing Mexico","code":""},{"path":"https://cbmc-gcmp.github.io/dafishr/reference/mx_eez.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Mexico shape ‚Äî mx_eez","text":"","code":"mx_eez"},{"path":"https://cbmc-gcmp.github.io/dafishr/reference/mx_eez.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Mexico shape ‚Äî mx_eez","text":"simple feature collection 1 features 2 fields Name empty Description empty geometry column containing geometry details","code":""},{"path":"https://cbmc-gcmp.github.io/dafishr/reference/mx_eez.html","id":"source","dir":"Reference","previous_headings":"","what":"Source","title":"Mexico shape ‚Äî mx_eez","text":"https://en.www.inegi.org.mx/","code":""},{"path":"https://cbmc-gcmp.github.io/dafishr/reference/mx_eez_pacific.html","id":null,"dir":"Reference","previous_headings":"","what":"Economic Exclusive Zone (EEZ) of the Pacific side of Mexico ‚Äî mx_eez_pacific","title":"Economic Exclusive Zone (EEZ) of the Pacific side of Mexico ‚Äî mx_eez_pacific","text":"sf object containing shapefiles Mexican EEZ Pacific","code":""},{"path":"https://cbmc-gcmp.github.io/dafishr/reference/mx_eez_pacific.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Economic Exclusive Zone (EEZ) of the Pacific side of Mexico ‚Äî mx_eez_pacific","text":"","code":"mx_eez_pacific"},{"path":"https://cbmc-gcmp.github.io/dafishr/reference/mx_eez_pacific.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Economic Exclusive Zone (EEZ) of the Pacific side of Mexico ‚Äî mx_eez_pacific","text":"simple feature collection 1 feature 1 field Name Mexican Pacific Exclusive Economic Zone geometry column containing geometry details","code":""},{"path":"https://cbmc-gcmp.github.io/dafishr/reference/mx_eez_pacific.html","id":"source","dir":"Reference","previous_headings":"","what":"Source","title":"Economic Exclusive Zone (EEZ) of the Pacific side of Mexico ‚Äî mx_eez_pacific","text":"https://en.www.inegi.org.mx/","code":""},{"path":"https://cbmc-gcmp.github.io/dafishr/reference/mx_inland.html","id":null,"dir":"Reference","previous_headings":"","what":"Area inland of Mexico ‚Äî mx_inland","title":"Area inland of Mexico ‚Äî mx_inland","text":"sf object containing shapefiles inland area Mexico","code":""},{"path":"https://cbmc-gcmp.github.io/dafishr/reference/mx_inland.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Area inland of Mexico ‚Äî mx_inland","text":"","code":"mx_inland"},{"path":"https://cbmc-gcmp.github.io/dafishr/reference/mx_inland.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Area inland of Mexico ‚Äî mx_inland","text":"simple feature collection 1 feature 2 fields Name Mexico Desciption empty geometry column containing geometry details","code":""},{"path":"https://cbmc-gcmp.github.io/dafishr/reference/mx_inland.html","id":"source","dir":"Reference","previous_headings":"","what":"Source","title":"Area inland of Mexico ‚Äî mx_inland","text":"modified Mexican shapefile","code":""},{"path":"https://cbmc-gcmp.github.io/dafishr/reference/mx_ports.html","id":null,"dir":"Reference","previous_headings":"","what":"Ports and Marinas of Mexico ‚Äî mx_ports","title":"Ports and Marinas of Mexico ‚Äî mx_ports","text":"sf object containing points representing locations Ports Marinas Mexico","code":""},{"path":"https://cbmc-gcmp.github.io/dafishr/reference/mx_ports.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Ports and Marinas of Mexico ‚Äî mx_ports","text":"","code":"mx_ports"},{"path":"https://cbmc-gcmp.github.io/dafishr/reference/mx_ports.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Ports and Marinas of Mexico ‚Äî mx_ports","text":"simple feature collection 237 features 2 fields class Type infrastructure can Puerto (Port), Marina name Name infrastructure (.e. port marina) geometry column containing geometry details","code":""},{"path":"https://cbmc-gcmp.github.io/dafishr/reference/mx_ports.html","id":"source","dir":"Reference","previous_headings":"","what":"Source","title":"Ports and Marinas of Mexico ‚Äî mx_ports","text":"https://en.www.inegi.org.mx/","code":""},{"path":"https://cbmc-gcmp.github.io/dafishr/reference/mx_shape.html","id":null,"dir":"Reference","previous_headings":"","what":"Mexico mainland ‚Äî mx_shape","title":"Mexico mainland ‚Äî mx_shape","text":"sf object containing shapefile Mexico","code":""},{"path":"https://cbmc-gcmp.github.io/dafishr/reference/mx_shape.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Mexico mainland ‚Äî mx_shape","text":"","code":"mx_shape"},{"path":"https://cbmc-gcmp.github.io/dafishr/reference/mx_shape.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Mexico mainland ‚Äî mx_shape","text":"simple feature collection 1 feature 2 fields Name Mexico Description empty geometry column containing geometry details","code":""},{"path":"https://cbmc-gcmp.github.io/dafishr/reference/mx_shape.html","id":"source","dir":"Reference","previous_headings":"","what":"Source","title":"Mexico mainland ‚Äî mx_shape","text":"https://en.www.inegi.org.mx/","code":""},{"path":"https://cbmc-gcmp.github.io/dafishr/reference/pipe.html","id":null,"dir":"Reference","previous_headings":"","what":"Pipe operator ‚Äî %>%","title":"Pipe operator ‚Äî %>%","text":"See magrittr::%>% details.","code":""},{"path":"https://cbmc-gcmp.github.io/dafishr/reference/pipe.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Pipe operator ‚Äî %>%","text":"","code":"lhs %>% rhs"},{"path":"https://cbmc-gcmp.github.io/dafishr/reference/pipe.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Pipe operator ‚Äî %>%","text":"lhs value magrittr placeholder. rhs function call using magrittr semantics.","code":""},{"path":"https://cbmc-gcmp.github.io/dafishr/reference/pipe.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Pipe operator ‚Äî %>%","text":"result calling rhs(lhs).","code":""},{"path":"https://cbmc-gcmp.github.io/dafishr/reference/preprocessing_vms.html","id":null,"dir":"Reference","previous_headings":"","what":"Preprocessing VMS data ‚Äî preprocessing_vms","title":"Preprocessing VMS data ‚Äî preprocessing_vms","text":"functions bundles cleaning functions allows easily used parallel processing speed cleaning VMS data .csv files. runs, creates folder called preprocessed store VMS data underwent preprocessing. multiple files used input (see examples ) create multiple files. outputs .fst format, allows fast upload large files. See fst package documentation information https://www.fstpackage.org/.","code":""},{"path":"https://cbmc-gcmp.github.io/dafishr/reference/preprocessing_vms.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Preprocessing VMS data ‚Äî preprocessing_vms","text":"","code":"preprocessing_vms(path)"},{"path":"https://cbmc-gcmp.github.io/dafishr/reference/preprocessing_vms.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Preprocessing VMS data ‚Äî preprocessing_vms","text":"path can path file downloaded data object . function used path adds file column returning data.frame object stores name file reference.","code":""},{"path":"https://cbmc-gcmp.github.io/dafishr/reference/preprocessing_vms.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Preprocessing VMS data ‚Äî preprocessing_vms","text":".fst file saved within preprocessed directory automatically created stores files used input function.","code":""},{"path":"https://cbmc-gcmp.github.io/dafishr/reference/preprocessing_vms.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Preprocessing VMS data ‚Äî preprocessing_vms","text":"","code":"# An example with the `sample.dataset` if (FALSE) { preprocessing_vms(sample_dataset) }  # An example on downloaded data if (FALSE) { vms_download(2019) # downloads raw data from 2019 with standard subfolders  preprocessing_vms(\"VMS-data/RLMSEP_2019/1.-ENERO/01-31 ENE 2008.csv\") }  # An example running everything in parallel on multiple files if (FALSE) {  library(future.apply) # this library is need for parallel processing library(fst) # this allows to load fst type of files  # Creating a list of file names from downloaded data (change the path if needed) file_names <- list.files(\"VMS-data/\", pattern = \".csv\", full.names = T, recursive = T)   # this plans a parallel session, set workers carefully according to your CPU capabilities plan(multisession, workers = 2)  # This runs the function in parallel system.time(   future_lapply(file_names, preprocessing_vms) ) }"},{"path":"https://cbmc-gcmp.github.io/dafishr/reference/remote_mpas.html","id":null,"dir":"Reference","previous_headings":"","what":"Remote Marine Protected Areas (MPAs) of Mexico ‚Äî remote_mpas","title":"Remote Marine Protected Areas (MPAs) of Mexico ‚Äî remote_mpas","text":"sf object containing shapefiles remote MPA polygons Mexico particular conservation interest","code":""},{"path":"https://cbmc-gcmp.github.io/dafishr/reference/remote_mpas.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Remote Marine Protected Areas (MPAs) of Mexico ‚Äî remote_mpas","text":"","code":"remote_mpas"},{"path":"https://cbmc-gcmp.github.io/dafishr/reference/remote_mpas.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Remote Marine Protected Areas (MPAs) of Mexico ‚Äî remote_mpas","text":"simple feature collection 5 features 2 fields Name Name remote MPA Spanish Description empty geometry column containing geometry details","code":""},{"path":"https://cbmc-gcmp.github.io/dafishr/reference/remote_mpas.html","id":"source","dir":"Reference","previous_headings":"","what":"Source","title":"Remote Marine Protected Areas (MPAs) of Mexico ‚Äî remote_mpas","text":"http://sig.conanp.gob.mx/website/pagsig/info_shape.htm","code":""},{"path":"https://cbmc-gcmp.github.io/dafishr/reference/sample_dataset.html","id":null,"dir":"Reference","previous_headings":"","what":"VMS sample dataset from Mexican fishery commission ‚Äî sample_dataset","title":"VMS sample dataset from Mexican fishery commission ‚Äî sample_dataset","text":"data.frame object extracted raw dataset VMS data year 2019.","code":""},{"path":"https://cbmc-gcmp.github.io/dafishr/reference/sample_dataset.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"VMS sample dataset from Mexican fishery commission ‚Äî sample_dataset","text":"","code":"sample_dataset"},{"path":"https://cbmc-gcmp.github.io/dafishr/reference/sample_dataset.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"VMS sample dataset from Mexican fishery commission ‚Äî sample_dataset","text":"data.frame 10,000 rows 9 columns. Nombre Name vessel RNP Unique code identifing vessel Puerto Base Base port vessel officially registered Permisionario o Concesionario Owner vessel partnership name FechaRecepcionUnitrac Date \"%d/%m/%Y %H:%M\" Latitud Latitude degree WGS84, crs = 4326, position vessel Longitud Longitude degree WGS84, crs = 4326, position vessel Velocidad Speed knots vessel specific time Rumbo Direction degrees vessel specific time","code":""},{"path":"https://cbmc-gcmp.github.io/dafishr/reference/sample_dataset.html","id":"source","dir":"Reference","previous_headings":"","what":"Source","title":"VMS sample dataset from Mexican fishery commission ‚Äî sample_dataset","text":"https://datos.gob.mx/busca/dataset/localizacion-y-monitoreo-satelital-de-embarcaciones-pesqueras","code":""},{"path":"https://cbmc-gcmp.github.io/dafishr/reference/vms_clean.html","id":null,"dir":"Reference","previous_headings":"","what":"Fixing dates and column names ‚Äî vms_clean","title":"Fixing dates and column names ‚Äî vms_clean","text":"function cleans raw VMS data column files, eliminate NULL values coordinates, parse dates, returns data.frame","code":""},{"path":"https://cbmc-gcmp.github.io/dafishr/reference/vms_clean.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Fixing dates and column names ‚Äî vms_clean","text":"","code":"vms_clean(path_to_data)"},{"path":"https://cbmc-gcmp.github.io/dafishr/reference/vms_clean.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Fixing dates and column names ‚Äî vms_clean","text":"path_to_data can path file downloaded data object . function used path adds file column returning data.frame object stores name file reference.","code":""},{"path":"https://cbmc-gcmp.github.io/dafishr/reference/vms_clean.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Fixing dates and column names ‚Äî vms_clean","text":"data.frame","code":""},{"path":"https://cbmc-gcmp.github.io/dafishr/reference/vms_clean.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Fixing dates and column names ‚Äî vms_clean","text":"takes raw data file downloaded using vms_download() function specifying directly path referencing data.frame already stored R object. path used, column name raw file conveniently added future reference. also split date three new colums year, month, day, retains original date column. function can used apply functions list files can paralleled using furrr functions.","code":""},{"path":"https://cbmc-gcmp.github.io/dafishr/reference/vms_clean.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Fixing dates and column names ‚Äî vms_clean","text":"","code":"# Using a path to a downloaded raw file if (FALSE) { vms_clean(\"VMS-data/VMS-data/RLMSEP_2019/1.- ENERO/01-10-ENE-2019.csv\") }  # Using sample dataset, or a data.frame already stored as an object data(\"sample_dataset\") cleaned_vms <- vms_clean(sample_dataset) #> [1] 969 #> Cleaned: 969 empty rows from data!  head(cleaned_vms) #> # A tibble: 6 x 13 #>      id  year month   day date                vessel_name  RNP   port_base owner #>   <int> <dbl> <dbl> <int> <dttm>              <chr>        <chr> <chr>     <chr> #> 1     1  2019     1    10 2019-01-10 03:59:00 EUROPESCA IV 54809 MAZATLAN~ EURO~ #> 2     2  2019     1    10 2019-01-10 18:04:00 TABASCO 454  27041 FRONTERA  ARMA~ #> 3     3  2019     1     1 2019-01-01 19:37:00 AVENTURERO   63677 TAMPICO   EDGA~ #> 4     4  2019     1     8 2019-01-08 12:06:00 DON ANTONIO~ 17392 MAZATLAN~ PESQ~ #> 5     5  2019     1    10 2019-01-10 06:08:00 PESCAMEX 14  45526 PROGRESO  PESC~ #> 6     6  2019     1     4 2019-01-04 05:41:00 DON QUINTIN~ 30619 TAMPICO   LUIS~ #> # ... with 4 more variables: latitude <dbl>, longitude <dbl>, speed <dbl>, #> #   direction <dbl>"},{"path":"https://cbmc-gcmp.github.io/dafishr/reference/vms_download.html","id":null,"dir":"Reference","previous_headings":"","what":"Download VMS raw data ‚Äî vms_download","title":"Download VMS raw data ‚Äî vms_download","text":"functions download data form datos abiertos inititative.","code":""},{"path":"https://cbmc-gcmp.github.io/dafishr/reference/vms_download.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Download VMS raw data ‚Äî vms_download","text":"","code":"vms_download(year = lubridate::year((Sys.time())) - 1)"},{"path":"https://cbmc-gcmp.github.io/dafishr/reference/vms_download.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Download VMS raw data ‚Äî vms_download","text":"year year data user wants download selected default last year. vector years can also used.","code":""},{"path":"https://cbmc-gcmp.github.io/dafishr/reference/vms_download.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Download VMS raw data ‚Äî vms_download","text":"saves downloaded data folder called VMS-data within working directory","code":""},{"path":"https://cbmc-gcmp.github.io/dafishr/reference/vms_download.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Download VMS raw data ‚Äî vms_download","text":"Data downloaded link: https://www.datos.gob.mx/busca/dataset/localizacion-y-monitoreo-satelital-de-embarcaciones-pesqueras/resource/309e872a-dbca-4962-b14f-f0da833abebe Downloaded data stored automatically VMS-data folder. Within main folder, data organized different folders months (spanish names) within multiple .csv files containing two weeks data points.","code":""},{"path":"https://cbmc-gcmp.github.io/dafishr/reference/vms_download.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Download VMS raw data ‚Äî vms_download","text":"","code":"# Download single year if (FALSE) { vms_download(2019) }  # Download multiple years if (FALSE) { vms_download(2015:2021) }"}]
